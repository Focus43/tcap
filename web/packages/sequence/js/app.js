!function(e,t){"use strict";t.module("sequence",["sequence.common","sequence.elements"]).config(["$provide","$locationProvider",function(e){!function(t){e.value("ApplicationPaths",{images:t.getAttribute("data-image-path"),tools:t.getAttribute("data-tools-path")})}(document.querySelector("head")),e.value("Breakpoints",{xs:480,sm:768,md:992,lg:1200})}])}(window,window.angular),angular.module("sequence.common",[]),angular.module("sequence.elements",[]),angular.module("sequence.common").controller("CtrlContactForm",["$scope","$http","$timeout",function(e,t,n){var o=angular.element(document.querySelector('[name="contactForm"] button')),r=o.text();e.sent_message=!1,e.has_errors=!1,e.EMAIL_REGEX=/^[a-z]+[a-z0-9._]+@[a-z]+\.[a-z.]{2,5}$/,e.submitHandler=function(a){return a.preventDefault(),e.contactForm.$invalid?(e.has_errors=!0,void 0):(e.has_errors=!1,o.empty().text("Sending..."),t.post(a.target.getAttribute("action"),e.form_data).success(function(){o.text(r),e.sent_message=!0,e.form_data={},e.contactForm.$setPristine(),n(function(){e.sent_message=!1},3500)}),void 0)}}]),angular.module("sequence.common").controller("CtrlRoot",["$window","$rootScope","$scope","Modernizr","FastClick","$compile","ApplicationPaths","ModalData",function(e,t,n,o,r,a,l,i){function c(){n._modal=i,n._modal.src.url=l.tools+"/disclaimer",n._modal.classes.disclaimer=!0,n._modal.open=!0,u=!0}function s(){return u?(angular.element(e).off("scroll",s),void 0):(n.$apply(c),void 0)}r.attach(document.body),t.rootClasses={"sidebar-nav":!1};var u=!1;document.querySelector("body").hasAttribute("can-admin")?(angular.element(document).on("keydown",function(e){e.ctrlKey&&77===e.keyCode&&angular.element("html").toggleClass("edit-mode-mobile")}),"undefined"!=typeof ConcreteEvent&&ConcreteEvent.subscribe("EditModeUpdateBlockComplete",function(){a(document.body)(t)})):o.touch?c():angular.element(e).on("scroll",s)}]),angular.module("sequence.common").provider("Modernizr",function(){this.$get=["$window","$log",function(e,t){return e.Modernizr||(t.warn("Modernizr unavailable!"),!1)}]}).provider("Tween",function(){this.$get=["$window","$log",function(e,t){return e.TweenMax||e.TweenLite||(t.warn("Tween library unavailable!"),!1)}]}).provider("Isotope",function(){this.$get=["$window","$log",function(e,t){return e.Isotope||(t.warn("Isotope unavailable!"),!1)}]}).provider("FastClick",function(){this.$get=["$window","$log",function(e,t){return e.FastClick||(t.warn("FastClick unavailable!"),!1)}]}).provider("moment",function(){this.$get=["$window","$log",function(e,t){return e.moment||(t.warn("Moment unavailable!"),!1)}]}),angular.module("sequence.elements").directive("accordion",["Tween",function(e){function t(t,n,o){var r=n[0].querySelectorAll(".group"),a=n[0].querySelectorAll(".accordion-body"),l=+o.speed;angular.element(r).on("click",function(){return angular.element(this).hasClass("active")?(e.to(a,l,{height:0}),angular.element(r).removeClass("active"),void 0):(e.to(a,l,{height:0}),e.to(this.querySelector(".accordion-body"),l,{height:this.querySelector(".accordion-content").clientHeight}),angular.element(r).removeClass("active"),angular.element(this).addClass("active"),void 0)})}return{restrict:"A",link:t}}]),angular.module("sequence.elements").directive("header",["$window","Tween",function(){function e(e,t,n,o){angular.element(document.querySelector("nav")).on("click",function(){o.toggleSidebarNav()})}return{restrict:"E",link:e,controller:["$rootScope",function(e){this.toggleSidebarNav=function(){e.$apply(function(){e.rootClasses["sidebar-nav"]=!e.rootClasses["sidebar-nav"]})}}]}}]),angular.module("sequence.elements").directive("hoverDirection",["$window","Tween","Modernizr",function(e,t,n){function o(e,t,o){if(!n.touch){var r=o.hoverDirection;c(t,r)}}var r={speed:.15,inverse:!1},a=function(e,t){var n=e.offsetWidth,o=e.offsetHeight,r=(t.x-(e.getBoundingClientRect().left+window.pageXOffset)-n/2)*(n>o?o/n:1),a=(t.y-(e.getBoundingClientRect().top+window.pageYOffset)-o/2)*(o>n?n/o:1),l=Math.round((Math.atan2(a,r)*(180/Math.PI)+180)/90+3)%4;return l},l=function(e){var t,n,o={left:"0",top:"-100%"},a={left:"0",top:"100%"},l={left:"-100%",top:"0"},i={left:"100%",top:"0"},c={top:"0"},s={left:"0"};switch(e){case 0:t=r.inverse?a:o,n=c;break;case 1:t=r.inverse?l:i,n=s;break;case 2:t=r.inverse?o:a,n=c;break;case 3:t=r.inverse?i:l,n=s}return{from:t,to:n}},i=function(e,n,o){t.to(e,o,n)},c=function(e,t){var n=angular.element(e);r.hoverElem=t,n.on("mouseenter mouseleave",function(t){var o=angular.element(n[0].querySelector("."+r.hoverElem)),c=a(e[0],{x:t.pageX,y:t.pageY}),s=l(c);"mouseover"===t.type?(o.css(s.from),o.css("display","block"),i(o,s.to,r.speed)):i(o,s.from,r.speed)})};return{restrict:"A",scope:!1,link:o}}]),angular.module("sequence.elements").directive("incrementable",["Tween",function(e){function t(e){var t=e[0].getBoundingClientRect(),n=Math.round(t.top-s.top),o=n+(e._tolerance||0);f[o]||(f[o]={complete:!1,nodes:[]}),f[o].nodes.push(e),l=Object.keys(f)}function n(e,t){this.text(Math.ceil(e.target[t]))}function o(t){for(var o=0,r=f[t].nodes.length;r>o;o++)e.to({val:0},f[t].nodes[o]._duration,{val:+f[t].nodes[o].text(),onUpdate:n,onUpdateScope:f[t].nodes[o],onUpdateParams:["{self}","val"]})}function r(){if(c!==window.pageYOffset){c=window.pageYOffset;for(var t=0,n=l.length;n>t;t++){var a=+l[t],s=window.pageYOffset+document.documentElement.clientHeight>a;s&&f[a].complete===!1&&(i++,f[a].complete=!0,o(a)),i===n&&e.ticker.removeEventListener("tick",r)}}}function a(e,n,o){n._tolerance=+(o.tolerance||u),n._duration=+(o.duration||d),t(n)}var l,i=0,c=window.pageYOffset,s=document.body.getBoundingClientRect(),u=50,d=1.5,f={};return e.ticker.addEventListener("tick",r),{restrict:"A",link:a}}]),angular.module("sequence.elements").directive("isotope",["Isotope",function(e){function t(t,n,o){var r=n[0],a=r.querySelectorAll("[isotope-filters] a[data-filter]"),l=r.querySelector("[isotope-grid]"),i=r.querySelectorAll(".isotope-node");!function c(e){return e.classList.contains("container")?(e.style.width="100%",e.style.padding=0,void 0):(c(e.parentElement),void 0)}(r),t.isotopeInstance=new e(l,{itemSelector:".isotope-node",layoutMode:o.isotope||"masonry"}),angular.element(a).on("click",function(){angular.element(a).removeClass("active"),angular.element(this).addClass("active");var e=this.getAttribute("data-filter");t.isotopeInstance.arrange({filter:e})}),angular.element(i).on("click",function(){angular.element(i).removeClass("active"),angular.element(this).addClass("active")})}return{restrict:"A",scope:!0,link:t}}]),angular.module("sequence.elements").directive("linkScroll",["$window","Tween",function(e,t){function n(n,o,r){var a=document.querySelector("#"+r.linkScroll);a&&o.on("click",function(n){n.preventDefault(),t.to(e,.65,{scrollTo:{y:a.offsetTop},ease:Power2.easeOut})})}return{restrict:"A",link:n,scope:!1}}]),angular.module("sequence.elements").directive("masthead",["Tween",function(e){function t(t,n,o){function r(t){var n=t,r=c[d],a=r.querySelector(".node-content").children,l=c[n],s=l.querySelector(".node-content").children;if(o.progressIndicator){var g=i.querySelectorAll("."+o.progressIndicator);e.killTweensOf(g),angular.element(g).css("width","0"),e.to(g,f,{css:{width:"100%"},ease:Linear.easeNone})}e.to(r,m,{autoAlpha:0}),e.staggerTo(a,m,{x:200,autoAlpha:0},m/a.length),e.staggerFromTo(s,m,{x:-200,autoAlpha:0},{x:0,autoAlpha:1},m/s.length),e.to(l,m,{autoAlpha:1}),d=n,u.removeClass("active").eq(d).addClass("active")}function a(){r(d===s?0:d+1)}function l(){r(0===d?s:d-1)}var i=n[0],c=i.querySelectorAll(".node"),s=c.length-1,u=angular.element(i.querySelectorAll(".markers a")),d=0,f=+(o.loopTiming||0),m=+(o.transitionSpeed||.75),g=null;angular.element(i.querySelectorAll(".arrows")).on("click",function(){return angular.element(this).hasClass("icn-angle-left")?(l(),void 0):(a(),void 0)}),u.on("click",function(){var e=Array.prototype.slice.call(i.querySelectorAll(".markers a")).indexOf(this);r(e)}),o.progressIndicator&&(g=i.querySelectorAll("."+o.progressIndicator),e.to(g,f,{css:{width:"100%"},ease:Linear.easeNone})),f>0&&!function p(t){setTimeout(function(){a(),p(t)},1e3*f),o.progressIndicator&&e.to(g,f,{css:{width:"100%"},ease:Linear.easeNone})}(3e3)}return{restrict:"A",link:t}}]),angular.module("sequence.elements").factory("ModalData",[function(){return{classes:{open:!1},src:{url:null}}}]).directive("modalize",[function(){function e(e,t,n){t.on("click",function(){e.$apply(function(){e._data.src.url=n.modalize,angular.isArray(e.extraClasses)&&angular.forEach(e.extraClasses,function(t){e._data.classes[t]=!0})})})}return angular.element(document.querySelector("body")).append('<div modal-window ng-class="_data.classes"></div>'),{restrict:"A",scope:{extraClasses:"=modalClasses"},link:e,controller:["$scope","ModalData",function(e,t){e._data=t}]}}]).directive("closeModal",["ModalData",function(e){function t(t,n){n.on("click",function(){t.$apply(function(){e.src.url=null})})}return{restrict:"A",scope:!1,link:t}}]).directive("modalWindow",["$rootScope",function(e){function t(t){t.$watch("_data.src.url",function(n){return n?(e.rootClasses["no-scroll"]=!0,t._data.classes.open=!0,t._data.classes.loading=!0,void 0):(t._data.classes={open:!1},e.rootClasses["no-scroll"]=!1,void 0)})}return{restrict:"A",scope:!0,link:t,template:'<div class="modal-inner" ng-include="_data.src.url"></div>',controller:["$scope","ModalData",function(e,t){e._data=t,e.$on("$includeContentLoaded",function(){e._data.classes.loading=!1})}]}}]).directive("modalSwap",[function(){function e(e,t){t.on("click",function(){var n=document.querySelector(".isotope-node.active"),o=n.parentNode.children,r=o.length-1,a=Array.prototype.slice.call(o).indexOf(n),l=t.hasClass("prev")?0===a?r:a-1:a===r?0:a+1;angular.element(n).removeClass("active"),angular.element(o[l]).addClass("active"),e.$apply(function(){e._data.src.url=o[l].getAttribute("modalize")})})}return{restrict:"A",scope:!0,link:e,controller:["$scope","ModalData",function(e,t){e._data=t}]}}]),angular.module("sequence.elements").directive("quoteCycle",["Tween",function(e){function t(t,n,o){function r(){var e=0;return angular.forEach(l,function(t){e=t.clientHeight>e?t.clientHeight:e}),e}var a=n[0],l=a.querySelectorAll(".group"),i=l.length-1,c=0,s=1e3*+(o.quoteCycle||5);e.fromTo(a,.5,{height:a.clientHeight},{height:r()}),function u(t){setTimeout(function(){e.fromTo(a,.5,{height:a.clientHeight},{height:r()});var n=c===i?0:c+1;e.to(l[c],.5,{y:-100,autoAlpha:0}),e.fromTo(l[n],.5,{y:100,autoAlpha:0},{y:0,autoAlpha:1,delay:.5}),c=n,u(t)},t)}(s)}return{restrict:"A",link:t}}]),angular.module("sequence.elements").directive("scrollTop",["$window","Tween",function(e,t){function n(n,o){var r=e.pageYOffset>0;o.toggleClass("visible",r),t.ticker.addEventListener("tick",function(){return!r&&e.pageYOffset>0?(r=!0,o.toggleClass("visible",r),void 0):(r&&0===e.pageYOffset&&(r=!1,o.toggleClass("visible",r)),void 0)}),o.on("click",function(){t.to(e,1,{scrollTo:{y:0},ease:Power2.easeOut})})}return{restrict:"A",scope:!1,link:n}}]),angular.module("sequence.elements").filter("timeAgo",["moment",function(e){return function(t){return e(t).fromNow()}}]).directive("showTwitterFeed",["$http","$interval","$timeout",function(e,t){return{restrict:"A",link:function(n,o,r){var a=angular.element(document.querySelectorAll("ul.errors")),l=angular.element(document.querySelectorAll(".twitter div.container"));a[0].style.display="none";var i=angular.element("<div class='waitForIt'><i class='fa fa-circle-o-notch fa-spin fa-5x'></i></div>");o.append(i),n.moving=!1,n.tweetWatcher=null,n.$watch("tweetWatcher",function(e,t){e&&e!==t&&(n.tweets=e)});var c=function(){e.get(r.showTwitterFeed).success(function(e){e.errors?(n.errors=e.errors,i[0].style.display="block",a[0].style.display="block",l[0].style.display="none"):(i[0].style.display="none",a[0].style.display="none",l[0].style.display="block",n.tweetWatcher=e)}).error(function(e,t){console.log("ERROR"),console.log(e),console.log(t)})},s=function(){n.moving&&n.tweets.push(n.tweets.shift()),n.moving=!n.moving};c(),t(c,12e4),t(s,2e3)}}}]);